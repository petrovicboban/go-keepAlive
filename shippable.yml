language: go

go:
  - 1.8
  - 1.9

env:
  global:
    - CI_REPORT=shippable/testresults/junit.xml

build:
  ci:
    - export GOPATH=$SHIPPABLE_GOPATH
    - env
    - go get -d -v ./...
    - go get github.com/t-yuki/gocover-cobertura
    - go test -coverprofile=$(pwd)/coverage.txt -covermode count ./...
    - $GOPATH/bin/gocover-cobertura < coverage.txt > shippable/codecoverage/coverage.xml
    - ls -al
    - go build -v ./...
    - ls -al




